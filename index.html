<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>RSS Feed Viewer</title>

<!-- Replace with your feed URL -->
<link rel="alternate" type="application/rss+xml" title="My RSS Feed" href="https://thepress-feed.surge.sh/meow.xml" />

<style>
  body {
    background: #000;
    color: #fff;
    font-family: system-ui, sans-serif;
    margin: 0;
    padding: 2rem;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  h1 {
    color: #fff;
    margin-bottom: 1rem;
    font-weight: 600;
  }
  #feed {
    max-width: 700px;
    width: 100%;
  }
  article {
    background: #111;
    padding: 1rem;
    border-radius: 10px;
    margin: 0.75rem 0;
    border: 1px solid #333;
  }
  a {
    color: #fff;
    text-decoration: none;
    font-size: 1.1rem;
    font-weight: 500;
  }
  a:hover {
    text-decoration: underline;
  }
  p {
    color: #ccc;
    font-size: 0.9rem;
  }
</style>
</head>
<body>
  <h1>RSS Feed</h1>
  <div id="feed">Loading...</div>

<script>
(async () => {
  const rssLink = document.querySelector('link[type="application/rss+xml"]')?.href;
  const feedContainer = document.getElementById('feed');

  if (!rssLink) {
    feedContainer.innerHTML = "<p>No RSS feed found on this page.</p>";
    return;
  }

  try {
    // Use the more reliable AllOrigins endpoint
    const response = await fetch(`https://api.allorigins.win/get?url=${encodeURIComponent(rssLink)}`);
    const data = await response.json();
    const xml = new DOMParser().parseFromString(data.contents, "text/xml");
    const items = xml.querySelectorAll("item, entry");

    if (!items.length) {
      feedContainer.innerHTML = "<p>No items found in feed.</p>";
      return;
    }

    feedContainer.innerHTML = "";
    items.forEach(item => {
      const title = item.querySelector("title")?.textContent || "Untitled";
      const link = item.querySelector("link")?.textContent || item.querySelector("link")?.getAttribute("href") || "#";
      const desc = item.querySelector("description, summary")?.textContent || "";
      const article = document.createElement("article");
      article.innerHTML = `
        <a href="${link}" target="_blank" rel="noopener">${title}</a>
        <p>${desc}</p>
      `;
      feedContainer.appendChild(article);
    });
  } catch (err) {
    feedContainer.innerHTML = `<p>Error loading feed: ${err.message}</p>`;
  }
})();
</script>
</body>
</html>
